{"version":3,"sources":["redux/reducers/profileReducer.ts","components/UsersList/UsersList.module.scss","components/Messages/Messages.module.scss","components/News/News.module.scss","components/Settings/Settings.module.scss","api/api.js","components/UI/Spinner/Spinner.module.scss","components/Nav/Nav.module.scss","components/UsersList/UserListItem/UserListItem.tsx","components/UI/Pagination/Pagination.tsx","components/hoc/withAuthRedirect.js","redux/reducers/usersReducer.ts","components/UsersList/UsersList.tsx","components/Messages/Messages.js","components/News/News.js","components/Settings/Settings.js","redux/reducers/authReducer.ts","components/UI/FormControl/FormControl.js","validate/login/index.js","components/Login/Login.js","components/Nav/Nav.js","redux/reducers/appReducer.ts","redux/reducers/authSelector.js","App.js","redux/rootReducer.tsx","index.js","components/Login/Login.module.scss","components/UI/Pagination/Pagination.module.scss","components/UI/Spinner/Spinner.js","components/UsersList/UserListItem/UserListItem.module.scss","components/UI/FormControl/FormControl.module.scss"],"names":["initialState","isLoading","profileInfo","status","profileReducer","state","action","type","profile","loading","toggleIsLoading","setStatus","getProfileThunk","userId","dispatch","profileAPI","getProfile","then","data","getStatusThunk","getStatus","updateStatusThunk","updateStatus","resultCode","module","exports","instance","axios","create","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","response","follow","post","unfollow","delete","put","authAPI","me","login","email","password","rememberMe","logout","UserListItem","photo","name","followed","followingInProgress","onClickUserItem","onClick","className","classes","UserListItemImg","src","alt","UserListItemName","disabled","some","id","e","stopPropagation","Pagination","props","pagesCount","Math","ceil","totalUsersCount","pages","i","push","portionCount","portionSize","useState","portionNumber","setPortionNumber","leftPortionNumber","rightPortionNumber","PaginationControl","PaginationItems","filter","p","map","active","key","onPageChanged","mapStateToProps","isAuth","authReducer","users","isLoaded","toggleFollowingProgress","isFetching","toggleIsLoaded","setUsers","UsersList","hundlerClickUserItem","history","this","getUsersThunkCreator","Spinner","content","Users","user","photos","large","Component","compose","connect","usersReducer","items","usersTotalCount","totalCount","setCurrentPage","followSuccess","unfollowSuccess","withRouter","AuthRedirect","to","React","Messages","News","Settings","setAuthUserData","getAuthUserDataThunk","a","logoutThunk","FormInput","input","meta","touched","error","style","color","marginTop","FormCheckbox","htmlFor","required","value","console","log","LoginFormRedux","reduxForm","form","Form","onSubmit","handleSubmit","fontSize","fontWeight","FormItem","Field","validate","component","placeholder","FormItemCheckbox","FormItemButton","Login","formData","loginThunk","message","messages","length","stopSubmit","_error","Nav","NavList","activeClassName","exact","initialized","getIsAuth","getUserLogin","Profile","lazy","App","initializeThunk","initializeView","marginLeft","cursor","path","fallback","appReducer","promise","Promise","all","rootReducer","combineReducers","formReducer","store","createStore","applyMiddleware","thunkMiddleware","window","app","ReactDOM","render","document","getElementById","SpinnerWrap","skChase","skChaseDot"],"mappings":"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","file":"static/js/main.5862eb64.chunk.js","sourcesContent":["import { profileAPI } from '../../api/api';\r\nimport { ProfileInfoType } from '../../types/types';\r\n\r\nconst SET_PROFILE = 'SET_PROFILE';\r\nconst SET_STATUS = 'SET_STATUS';\r\nconst TOGGLE_IS_LOADING = 'TOGGLE_IS_LOADING';\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  profileInfo: null as ProfileInfoType | null,\r\n  status: '',\r\n};\r\n\r\nexport type InitialStateType = typeof initialState;\r\n\r\nexport default function profileReducer(\r\n  state = initialState,\r\n  action: any\r\n): InitialStateType {\r\n  switch (action.type) {\r\n    case SET_PROFILE:\r\n      return { ...state, profileInfo: { ...action.profile } };\r\n\r\n    case TOGGLE_IS_LOADING:\r\n      return { ...state, isLoading: action.loading };\r\n\r\n    case SET_STATUS:\r\n      return { ...state, status: action.status };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\ntype SetProfileActionType = {\r\n  type: typeof SET_PROFILE;\r\n  profile: ProfileInfoType;\r\n};\r\n\r\nexport const setProfile = (profile: ProfileInfoType): SetProfileActionType => ({\r\n  type: SET_PROFILE,\r\n  profile,\r\n});\r\n\r\ntype ToggleIsLoadingType = {\r\n  type: typeof TOGGLE_IS_LOADING;\r\n  loading: boolean;\r\n};\r\n\r\nexport const toggleIsLoading = (loading: boolean): ToggleIsLoadingType => ({\r\n  type: TOGGLE_IS_LOADING,\r\n  loading,\r\n});\r\n\r\ntype SetStatusType = {\r\n  type: typeof SET_STATUS;\r\n  status: string;\r\n};\r\n\r\nexport const setStatus = (status: string): SetStatusType => ({\r\n  type: SET_STATUS,\r\n  status,\r\n});\r\n\r\n// THUNK\r\nexport const getProfileThunk = (userId: number) => {\r\n  return (dispatch: any) => {\r\n    dispatch(toggleIsLoading(false));\r\n    profileAPI.getProfile(userId).then((data) => {\r\n      dispatch(setProfile(data));\r\n      dispatch(toggleIsLoading(true));\r\n    });\r\n  };\r\n};\r\n\r\nexport const getStatusThunk = (userId: number) => {\r\n  return (dispatch: any) => {\r\n    profileAPI.getStatus(userId).then((data) => {\r\n      dispatch(setStatus(data));\r\n    });\r\n  };\r\n};\r\n\r\nexport const updateStatusThunk = (status: string) => {\r\n  return (dispatch: any) => {\r\n    profileAPI.updateStatus(status).then((data) => {\r\n      if (!data.resultCode) {\r\n        dispatch(setStatus(status));\r\n      }\r\n    });\r\n  };\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Users\":\"UsersList_Users__2YTJ6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Messages\":\"Messages_Messages__33Ht9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"News\":\"News_News__30ej5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Settings\":\"Settings_Settings__2NZt4\"};","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n  withCredentials: true,\r\n  baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n  headers: { 'API-KEY': '1d50145e-9b5b-43e8-933a-f2213da6e70b' }\r\n});\r\n\r\nexport const usersAPI = {\r\n  getUsers(currentPage = 1, pageSize = 10) {\r\n    return instance\r\n      .get(`users?page=${currentPage}&count=${pageSize}`)\r\n      .then(response => response.data);\r\n  },\r\n\r\n  follow(userId) {\r\n    return instance.post(`follow/${userId}`).then(response => response.data);\r\n  },\r\n\r\n  unfollow(userId) {\r\n    return instance.delete(`follow/${userId}`).then(response => response.data);\r\n  }\r\n};\r\n\r\nexport const profileAPI = {\r\n  getProfile(userId) {\r\n    return instance\r\n      .get(`profile/${userId}`)\r\n      .then(response => response.data);\r\n  },\r\n \r\n  getStatus(userId) {\r\n    return instance\r\n    .get(`profile/status/${userId}`)\r\n    .then(response => response.data);\r\n  },\r\n\r\n  updateStatus(status) {\r\n    return instance\r\n    .put(`profile/status`, { status: status})\r\n    .then(response => response.data);\r\n  }\r\n}\r\n\r\nexport const authAPI = {\r\n  me() {\r\n    return instance.get('auth/me').then(response => response.data);\r\n  },\r\n\r\n  login(email, password, rememberMe=false) {\r\n    return instance.post('auth/login', {email, password, rememberMe}).then(response => response.data);\r\n  },\r\n\r\n  logout() {\r\n    return instance.delete('auth/login').then(response => response.data);\r\n  },\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SpinnerWrap\":\"Spinner_SpinnerWrap__ZsQgZ\",\"skChase\":\"Spinner_skChase__U0TiR\",\"sk-chase\":\"Spinner_sk-chase__3HvUI\",\"skChaseDot\":\"Spinner_skChaseDot__1zdue\",\"sk-chase-dot\":\"Spinner_sk-chase-dot__3b1L5\",\"sk-chase-dot-before\":\"Spinner_sk-chase-dot-before__3exAG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Nav\":\"Nav_Nav__bCTYE\",\"NavList\":\"Nav_NavList__KuCu7\",\"active\":\"Nav_active__11_gR\"};","import React from 'react';\r\nimport classes from './UserListItem.module.scss';\r\n\r\ntype PropsType = {\r\n  userId: number\r\n  photo: string | null\r\n  name: string\r\n  followed: boolean | undefined\r\n  follow: (userId:number) => void\r\n  unfollow: (userId:number) => void\r\n  followingInProgress: Array<number>\r\n  onClickUserItem: (userId:number) => void\r\n};\r\n\r\nconst defaultImg =\r\n  'https://specenergo.ru/sites/default/files/styles/mt_testimonial_image/public/2016-11/testimonial-4.jpg?itok=a7UblV6p';\r\n\r\nconst UserListItem: React.FC<PropsType> = ({\r\n  userId,\r\n  photo,\r\n  name,\r\n  followed,\r\n  follow,\r\n  unfollow,\r\n  followingInProgress,\r\n  onClickUserItem\r\n}) => {\r\n  return (\r\n    <div\r\n      onClick={() => onClickUserItem(userId)}\r\n      className={classes.UserListItem}\r\n    >\r\n      <div className={classes.UserListItemImg}>\r\n        <img src={photo ? photo : defaultImg} alt='img' />\r\n      </div>\r\n      <div className={classes.UserListItemName}>{name}</div>\r\n\r\n      {followed ? (\r\n        <button\r\n          disabled={followingInProgress.some(id => id === userId)}\r\n          onClick={e => {\r\n            e.stopPropagation();\r\n            unfollow(userId);\r\n          }}\r\n        >\r\n          Unfollow\r\n        </button>\r\n      ) : (\r\n        <button\r\n          disabled={followingInProgress.some(id => id === userId)}\r\n          onClick={e => {\r\n            e.stopPropagation();\r\n            follow(userId);\r\n          }}\r\n        >\r\n          Follow\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserListItem;\r\n","import React, { useState } from 'react';\r\nimport classes from './Pagination.module.scss';\r\n\r\ntype PropsType = {\r\n  totalUsersCount: number;\r\n  pageSize: number;\r\n  currentPage: number;\r\n  onPageChanged: (currentPage: number, pageSize: number) => void;\r\n  portionSize: number;\r\n};\r\n\r\nconst Pagination: React.FC<PropsType> = (props) => {\r\n  const pagesCount = Math.ceil(props.totalUsersCount / props.pageSize);\r\n  const pages: Array<number> = [];\r\n\r\n  for (let i = 1; i <= pagesCount; i++) {\r\n    pages.push(i);\r\n  }\r\n\r\n  const portionCount = Math.ceil(pagesCount / props.portionSize);\r\n  const [portionNumber, setPortionNumber] = useState(1);\r\n  const leftPortionNumber = (portionNumber - 1) * props.portionSize + 1;\r\n  const rightPortionNumber = portionNumber * props.portionSize;\r\n\r\n  return (\r\n    <div className={classes.Pagination}>\r\n      {portionNumber > 1 && (\r\n        <button\r\n          className={classes.PaginationControl}\r\n          onClick={() => {\r\n            setPortionNumber(portionNumber - 1);\r\n          }}\r\n        >\r\n          Prev\r\n        </button>\r\n      )}\r\n\r\n      <div className={classes.PaginationItems}>\r\n        {pages\r\n          .filter((p) => p >= leftPortionNumber && p <= rightPortionNumber)\r\n          .map((p) => {\r\n            return (\r\n              <span\r\n                className={props.currentPage === p ? classes.active : ''}\r\n                key={p}\r\n                onClick={() => props.onPageChanged(p, props.pageSize)}\r\n              >\r\n                {p}\r\n              </span>\r\n            );\r\n          })}\r\n      </div>\r\n\r\n      {portionCount > portionNumber && (\r\n        <button\r\n          className={classes.PaginationControl}\r\n          onClick={() => {\r\n            setPortionNumber(portionNumber + 1);\r\n          }}\r\n        >\r\n          Next\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","import React from 'react';\r\nimport { Redirect } from 'react-router';\r\nimport { connect } from 'react-redux';\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    isAuth: state.authReducer.isAuth\r\n  };\r\n};\r\n\r\nexport const withAuthRedirect = Component => {\r\n  class AuthRedirect extends React.Component {\r\n    render() {\r\n      if (!this.props.isAuth) return <Redirect to={'/login'} />;\r\n\r\n      return <Component {...this.props}/>\r\n    }\r\n  }\r\n\r\n  return connect(mapStateToProps) (AuthRedirect)\r\n};\r\n\r\n","import { usersAPI } from '../../api/api';\r\nimport { UserType } from '../../types/types';\r\n\r\nconst FOLLOW = 'FOLLOW';\r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS';\r\nconst TOGGLE_IS_LOADED = 'TOGGLE_IS_LOADED';\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\r\nconst SET_USERS_TOTAL_COUNT = 'SET_USERS_TOTAL_COUNT';\r\nconst SET_USERS = 'SET_USERS';\r\n\r\nconst initialState = {\r\n  users: [] as Array<UserType>,\r\n  pageSize: 10,\r\n  portionSize: 10,\r\n  totalUsersCount: 0,\r\n  currentPage: 1,\r\n  isLoaded: false,\r\n  followingInProgress: [] as Array<number>, // array of user id\r\n};\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\nexport default function usersReducer(\r\n  state = initialState,\r\n  action: any\r\n): InitialStateType {\r\n  switch (action.type) {\r\n    case SET_USERS:\r\n      return { ...state, users: [...action.users] };\r\n\r\n    case SET_USERS_TOTAL_COUNT:\r\n      return { ...state, totalUsersCount: action.usersTotalCount };\r\n\r\n    case SET_CURRENT_PAGE:\r\n      return { ...state, currentPage: action.currentPage };\r\n\r\n    case FOLLOW:\r\n      return {\r\n        ...state,\r\n        users: state.users.map((user) => {\r\n          if (user.id === action.userId) {\r\n            return { ...user, followed: true };\r\n          }\r\n\r\n          return user;\r\n        }),\r\n      };\r\n\r\n    case UNFOLLOW:\r\n      return {\r\n        ...state,\r\n        users: state.users.map((user) => {\r\n          if (user.id === action.userId) {\r\n            return { ...user, followed: false };\r\n          }\r\n\r\n          return user;\r\n        }),\r\n      };\r\n\r\n    case TOGGLE_IS_LOADED:\r\n      return { ...state, isLoaded: action.isLoaded };\r\n\r\n    case TOGGLE_IS_FOLLOWING_PROGRESS:\r\n      return {\r\n        ...state,\r\n        followingInProgress: action.isFetching\r\n          ? [...state.followingInProgress, action.userId]\r\n          : state.followingInProgress.filter((id) => id !== action.userId),\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ACTION CREATOR\r\ntype FollowSuccessType = {\r\n  type: typeof FOLLOW;\r\n  userId: number;\r\n};\r\n\r\nexport const followSuccess = (userId: number): FollowSuccessType => ({\r\n  type: FOLLOW,\r\n  userId,\r\n});\r\n\r\ntype UnFollowSuccessType = {\r\n  type: typeof UNFOLLOW;\r\n  userId: number;\r\n};\r\n\r\nexport const unfollowSuccess = (userId: number): UnFollowSuccessType => ({\r\n  type: UNFOLLOW,\r\n  userId,\r\n});\r\n\r\ntype ToggleFollowingProgressType = {\r\n  type: typeof TOGGLE_IS_FOLLOWING_PROGRESS;\r\n  isFetching: boolean;\r\n  userId: number;\r\n};\r\n\r\nexport const toggleFollowingProgress = (\r\n  isFetching: boolean,\r\n  userId: number\r\n): ToggleFollowingProgressType => ({\r\n  type: TOGGLE_IS_FOLLOWING_PROGRESS,\r\n  isFetching,\r\n  userId,\r\n});\r\n\r\ntype ToggleIsLoadedType = {\r\n  type: typeof TOGGLE_IS_LOADED;\r\n  isLoaded: boolean;\r\n};\r\n\r\nexport const toggleIsLoaded = (isLoaded: boolean): ToggleIsLoadedType => ({\r\n  type: TOGGLE_IS_LOADED,\r\n  isLoaded,\r\n});\r\n\r\ntype SetUsersType = {\r\n  type: typeof SET_USERS;\r\n  users: Array<UserType>;\r\n};\r\n\r\nexport const setUsers = (users: Array<UserType>): SetUsersType => ({\r\n  type: SET_USERS,\r\n  users,\r\n});\r\n\r\ntype SetUsersTotalCountType = {\r\n  type: typeof SET_USERS_TOTAL_COUNT;\r\n  usersTotalCount: number;\r\n};\r\n\r\nexport const setUsersTotalCount = (\r\n  usersTotalCount: number\r\n): SetUsersTotalCountType => ({\r\n  type: SET_USERS_TOTAL_COUNT,\r\n  usersTotalCount,\r\n});\r\n\r\ntype SetCurrentPageType = {\r\n  type: typeof SET_CURRENT_PAGE;\r\n  currentPage: number;\r\n};\r\n\r\nexport const setCurrentPage = (currentPage: number): SetCurrentPageType => ({\r\n  type: SET_CURRENT_PAGE,\r\n  currentPage,\r\n});\r\n\r\n// THUNK\r\nexport const getUsersThunkCreator = () => {\r\n  return (dispatch: any) => {\r\n    dispatch(toggleIsLoaded(false));\r\n    usersAPI.getUsers().then((data) => {\r\n      dispatch(setUsers(data.items));\r\n      dispatch(setUsersTotalCount(data.totalCount));\r\n      dispatch(toggleIsLoaded(true));\r\n    });\r\n  };\r\n};\r\n\r\nexport const onPageChanged = (currentPage: number, pageSize: number) => {\r\n  return (dispatch: any) => {\r\n    dispatch(setCurrentPage(currentPage));\r\n    usersAPI.getUsers(currentPage, pageSize).then((data) => {\r\n      dispatch(setUsers(data.items));\r\n    });\r\n  };\r\n};\r\n\r\nexport const follow = (userId: number) => {\r\n  return (dispatch: any) => {\r\n    dispatch(toggleFollowingProgress(true, userId));\r\n    usersAPI.follow(userId).then((data) => {\r\n      if (data.resultCode === 0) {\r\n        dispatch(followSuccess(userId));\r\n      }\r\n      dispatch(toggleFollowingProgress(false, userId));\r\n    });\r\n  };\r\n};\r\n\r\nexport const unfollow = (userId: number) => {\r\n  return (dispatch: any) => {\r\n    dispatch(toggleFollowingProgress(true, userId));\r\n    usersAPI.unfollow(userId).then((data) => {\r\n      if (data.resultCode === 0) {\r\n        dispatch(unfollowSuccess(userId));\r\n      }\r\n      dispatch(toggleFollowingProgress(false, userId));\r\n    });\r\n  };\r\n};\r\n","import React, { Component } from 'react';\r\nimport classes from './UsersList.module.scss';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport { compose } from 'redux';\r\n\r\nimport UserListItem from './UserListItem/UserListItem';\r\nimport Spinner from '../UI/Spinner/Spinner';\r\nimport Pagination from '../UI/Pagination/Pagination';\r\nimport { withAuthRedirect } from '../hoc/withAuthRedirect';\r\n\r\nimport {\r\n  getUsersThunkCreator,\r\n  onPageChanged,\r\n  follow,\r\n  unfollow\r\n} from '../../redux/reducers/usersReducer';\r\n\r\nimport { UserType } from '../../types/types';\r\nimport { AppStateType } from '../../redux/rootReducer';\r\n\r\ntype MapStatePropsType = {\r\n  totalUsersCount: number;\r\n  pageSize: number;\r\n  currentPage: number;\r\n  portionSize: number;\r\n  users: Array<UserType>;\r\n  isLoaded: boolean;\r\n  followingInProgress: Array<number>;\r\n};\r\n\r\ntype MapDispatchPropsType = {\r\n  getUsersThunkCreator: () => void\r\n  onPageChanged: (currentPage: number, pageSize: number) => void;\r\n  follow: (userId:number) => void;\r\n  unfollow: (userId:number) => void;\r\n};\r\n\r\ntype OwnPropsType = {\r\n  history: any\r\n};\r\n\r\ntype PropsType = MapStatePropsType & MapDispatchPropsType & OwnPropsType\r\n\r\nclass UsersList extends Component<PropsType> {\r\n  componentDidMount() {\r\n    this.props.getUsersThunkCreator();\r\n  }\r\n\r\n  hundlerClickUserItem = (userId: number) => {\r\n    this.props.history.push(`/profile/${userId}`);\r\n  };\r\n\r\n  render() {\r\n    const loading = (\r\n        <Spinner />\r\n    );\r\n\r\n    const content = (\r\n      <>\r\n        <div className={classes.Users}>\r\n          {this.props.users.map(user => {\r\n            return (\r\n              <UserListItem\r\n                name={user.name}\r\n                userId={user.id}\r\n                photo={user.photos.large}\r\n                key={user.id}\r\n                followed={user.followed}\r\n                follow={this.props.follow}\r\n                unfollow={this.props.unfollow}\r\n                onClickUserItem={this.hundlerClickUserItem}\r\n                followingInProgress={this.props.followingInProgress}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n        <Pagination\r\n          totalUsersCount={this.props.totalUsersCount}\r\n          pageSize={this.props.pageSize}\r\n          portionSize={this.props.portionSize}\r\n          currentPage={this.props.currentPage}\r\n          onPageChanged={this.props.onPageChanged}\r\n        />\r\n      </>\r\n    );\r\n\r\n    return this.props.isLoaded ? content : loading;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType) : MapStatePropsType => {\r\n  return {\r\n    users: state.usersReducer.users,\r\n    pageSize: state.usersReducer.pageSize,\r\n    portionSize: state.usersReducer.portionSize,\r\n    totalUsersCount: state.usersReducer.totalUsersCount,\r\n    currentPage: state.usersReducer.currentPage,\r\n    isLoaded: state.usersReducer.isLoaded,\r\n    followingInProgress: state.usersReducer.followingInProgress\r\n  };\r\n};\r\n\r\nexport default compose(\r\n  connect<MapStatePropsType, MapDispatchPropsType, null, AppStateType>(mapStateToProps, {\r\n    getUsersThunkCreator,\r\n    onPageChanged,\r\n    follow,\r\n    unfollow\r\n  }),\r\n  withRouter,\r\n  withAuthRedirect\r\n)(UsersList);\r\n","import React from 'react'\r\nimport classes from './Messages.module.scss'\r\n\r\nconst Messages = () => {\r\n  return (\r\n    <div className={classes.Messages}>\r\n      There will be messages\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Messages","import React from 'react'\r\nimport classes from './News.module.scss'\r\n\r\nconst News = () => {\r\n  return (\r\n    <div className={classes.News}>\r\n      There will be news\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default News","import React from 'react'\r\nimport classes from './Settings.module.scss'\r\n\r\nconst Settings = () => {\r\n  return (\r\n    <div className={classes.Settings}>\r\n      There will be Settings\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Settings","import { authAPI } from '../../api/api';\r\nimport { stopSubmit } from 'redux-form';\r\n\r\nconst SET_AUTH_USER_DATA = 'auth/SET_AUTH_USER_DATA';\r\n\r\nconst initialState = {\r\n  id: null as number | null,\r\n  email: null as string | null,\r\n  login: null as string | null,\r\n  isAuth: false,\r\n};\r\n\r\nexport type initialStateType = typeof initialState\r\n\r\nexport default function authReducer(\r\n  state = initialState,\r\n  action: any\r\n): initialStateType {\r\n  switch (action.type) {\r\n    case SET_AUTH_USER_DATA:\r\n      return {\r\n        ...state,\r\n        ...action.data,\r\n        isAuth: action.data.isAuth,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\ntype SetAuthUserDataPayloadType = {\r\n  userId: number | null;\r\n  email: string | null;\r\n  login: string | null;\r\n  isAuth: boolean;\r\n};\r\n\r\ntype SetAuthUserDataType = {\r\n  type: typeof SET_AUTH_USER_DATA;\r\n  data: SetAuthUserDataPayloadType;\r\n};\r\n\r\n// ACTION CREATOR\r\nexport const setAuthUserData = (\r\n  userId: number | null,\r\n  email: string | null,\r\n  login: string | null,\r\n  isAuth: boolean\r\n): SetAuthUserDataType => ({\r\n  type: SET_AUTH_USER_DATA,\r\n  data: { userId, email, login, isAuth },\r\n});\r\n\r\n// THUNK\r\nexport const getAuthUserDataThunk = () => async (dispatch: any) => {\r\n  const data = await authAPI.me();\r\n\r\n  if (data.resultCode === 0) {\r\n    const { id, email, login } = data.data;\r\n    dispatch(setAuthUserData(id, email, login, true));\r\n  }\r\n};\r\n\r\nexport const loginThunk = (email: string, password:string, rememberMe:boolean) => async (dispatch:any) => {\r\n  const data = await authAPI.login(email, password, rememberMe);\r\n\r\n  if (data.resultCode === 0) {\r\n    dispatch(getAuthUserDataThunk());\r\n  } else {\r\n    const message = data.messages.length > 0 ? data.messages[0] : 'Some Error';\r\n    const action = stopSubmit('login', { _error: message });\r\n    dispatch(action);\r\n  }\r\n};\r\n\r\nexport const logoutThunk = () => async (dispatch: any) => {\r\n  const data = await authAPI.logout();\r\n\r\n  if (data.resultCode === 0) {\r\n    dispatch(setAuthUserData(null, null, null, false));\r\n  }\r\n};\r\n","import React from 'react'\r\nimport classes from './FormControl.module.scss'\r\n\r\nexport const FormInput = ({ input, meta, ...props }) => {\r\n  return (\r\n    <div className={classes.FormInput}>\r\n      <input {...input} {...props} />\r\n      {meta.touched && meta.error && (\r\n        <div style={{ color: 'red', marginTop: '10px' }}>{meta.error}</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const FormCheckbox = ({ input, meta, ...props }) => {\r\n  return (\r\n    <div  className={classes.FormCheckbox}>\r\n      <label htmlFor=\"\">\r\n        <input {...input} {...props} />\r\n      </label>\r\n    </div>\r\n  );\r\n};","export const required = value => {\r\n  if (value) {\r\n    console.log('validate(required) ok');\r\n    return undefined;\r\n  }\r\n\r\n  return 'Field is required';\r\n};","import React, { Component } from 'react';\r\nimport classes from './Login.module.scss';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { reduxForm, Field } from 'redux-form';\r\nimport {Redirect} from 'react-router'\r\nimport { loginThunk, logoutThunk } from '../../redux/reducers/authReducer';\r\nimport { FormInput, FormCheckbox } from '../UI/FormControl/FormControl';\r\nimport { required } from '../../validate/login';\r\n// import { Redirect } from 'react-router-dom';\r\n\r\nconst LoginForm = props => {\r\n  return (\r\n    <form className={classes.Form} onSubmit={props.handleSubmit}>\r\n      <div style={{fontSize: '20px', color: '#fff'}}>\r\n        <div style={{fontWeight: 'bold'}}>Test Account:</div>\r\n        <div>Email: free@samuraijs.com</div>\r\n        <div>Password: free</div>\r\n      </div>\r\n      <div className={classes.FormItem}>\r\n        <label htmlFor=''>Login</label>\r\n        <Field\r\n          validate={[required]}\r\n          name={'email'}\r\n          component={FormInput}\r\n          placeholder='Email'\r\n        />\r\n      </div>\r\n      <div className={classes.FormItem}>\r\n        <label htmlFor=''>Password</label>\r\n        <Field name={'password'} component={FormInput} placeholder='Password' />\r\n      </div>\r\n      <div className={classes.FormItemCheckbox}>\r\n        <Field\r\n          name={'rememberMe'}\r\n          id='checkbox'\r\n          type={'checkbox'}\r\n          component={FormCheckbox}\r\n        />\r\n        <label htmlFor='checkbox'>Remember</label>\r\n      </div>\r\n      {props.error && <div style={{ color: 'red' }}>{props.error}</div>}\r\n\r\n      <div className={classes.FormItemButton}>\r\n        <button>Login</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst LoginFormRedux = reduxForm({ form: 'login' })(LoginForm);\r\n\r\nclass Login extends Component {\r\n  onSubmit = formData => {\r\n    this.props.loginThunk(\r\n      formData.email,\r\n      formData.password,\r\n      formData.rememberMe\r\n    );\r\n  };\r\n\r\n  render() {\r\n    if (this.props.isAuth) {\r\n      return <Redirect to={'/'} />;\r\n    }\r\n\r\n    return (\r\n      <div className={classes.Login}>\r\n        <LoginFormRedux onSubmit={this.onSubmit} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    isAuth: state.authReducer.isAuth\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { loginThunk, logoutThunk })(Login);\r\n","import React from 'react';\r\nimport classes from './Nav.module.scss';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst Nav = props => {\r\n  return (\r\n    <nav className={classes.Nav}>\r\n      <ul className={classes.NavList}>\r\n        <li>\r\n          {props.isAuth ? (\r\n            <NavLink\r\n              to={`/profile/${props.userId}`}\r\n              activeClassName={classes.active}\r\n              exact\r\n            >\r\n              My profile\r\n            </NavLink>\r\n          ) :\r\n          (\r\n            <NavLink\r\n              to='/login'\r\n              activeClassName={classes.active}\r\n              exact\r\n            >\r\n              My profile\r\n            </NavLink>\r\n          )}\r\n        </li>\r\n        <li>\r\n          <NavLink to='/' activeClassName={classes.active} exact>\r\n            Users\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink to='/messages' activeClassName={classes.active}>\r\n            Messages\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink to='/news' activeClassName={classes.active} exact>\r\n            News\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink to='/settings' activeClassName={classes.active}>\r\n            Settings\r\n          </NavLink>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    userId: state.authReducer.userId,\r\n    isAuth: state.authReducer.isAuth\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Nav);\r\n","import { getAuthUserDataThunk } from './authReducer';\r\n\r\nconst SET_INITIALIZED = 'SET_INITIALIZED';\r\n\r\nexport type InitialStateType = {\r\n  initialized: boolean;\r\n};\r\n\r\nconst initialState: InitialStateType = { initialized: false };\r\n\r\nexport default function appReducer(\r\n  state = initialState,\r\n  action: any\r\n): InitialStateType {\r\n  switch (action.type) {\r\n    case SET_INITIALIZED:\r\n      return {\r\n        ...state,\r\n        initialized: true,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\ntype initializedSuccessType = { type: typeof SET_INITIALIZED };\r\n\r\n// ACTION CREATOR\r\nexport const initializedSuccess = ():initializedSuccessType => ({ type: SET_INITIALIZED });\r\n\r\nexport const initializeThunk = () => {\r\n  return (dispatch: any) => {\r\n    const promise = dispatch(getAuthUserDataThunk());\r\n\r\n    Promise.all([promise]).then(() => {\r\n      dispatch(initializedSuccess());\r\n    });\r\n  };\r\n};\r\n","//import { createSelector } from 'reselect'\r\n\r\nexport const getIsAuth = (state) => {\r\n  return state.authReducer.isAuth\r\n} \r\n\r\nexport const getUserLogin = (state) => {\r\n  return state.authReducer.login\r\n}\r\n\r\n//export const getUsers = (state) => {\r\n//  return state.authReducer.users\r\n//}\r\n//\r\n//export const getUsersSuperSelector = createSelector(getUsers, (users) => {\r\n//  users.filter( u => true)\r\n//})","import React, { Component, Suspense } from 'react';\r\nimport './App.scss';\r\n\r\nimport UsersList from './components/UsersList/UsersList';\r\nimport Messages from './components/Messages/Messages';\r\nimport News from './components/News/News';\r\nimport Settings from './components/Settings/Settings';\r\nimport Login from './components/Login/Login';\r\nimport Nav from './components/Nav/Nav';\r\nimport Spinner from './components/UI/Spinner/Spinner';\r\n\r\nimport { withRouter } from 'react-router';\r\nimport { Switch, Route, NavLink } from 'react-router-dom';\r\n\r\nimport { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { logoutThunk } from './redux/reducers/authReducer';\r\nimport { initializeThunk } from './redux/reducers/appReducer';\r\nimport { getIsAuth, getUserLogin } from './redux/reducers/authSelector';\r\nconst Profile = React.lazy(() => import('./components/Profile/Profile'));\r\n\r\nconst defaultAvatar =\r\n  'https://specenergo.ru/sites/default/files/styles/mt_testimonial_image/public/2016-11/testimonial-4.jpg?itok=a7UblV6p';\r\nclass App extends Component {\r\n  componentDidMount() {\r\n    this.props.initializeThunk();\r\n  }\r\n\r\n  logout = () => {\r\n    this.props.logoutThunk();\r\n    this.props.history.push('/login');\r\n  };\r\n\r\n  render() {\r\n\r\n    const initializeView = (\r\n      <div className=\"AppInitialize\">\r\n        <Spinner />\r\n        <span className=\"AppInitializeText\">Loading...</span>\r\n      </div>\r\n    )\r\n    \r\n    if (!this.props.initialized) {\r\n      return initializeView\r\n    }\r\n\r\n    return (\r\n      <div className='App'>\r\n        <header className='Header'>\r\n          <div className='Logo'>SocialNetwork</div>\r\n          <div className='User'>\r\n            {!this.props.isAuth && (\r\n              <div style={{ marginLeft: '20px', cursor: 'pointer' }}>\r\n                <NavLink to={'/login'}>Login</NavLink>\r\n              </div>\r\n            )}\r\n\r\n            {this.props.isAuth && (\r\n              <>\r\n                <span className='UserName'>{this.props.login}</span>\r\n                <div className='Avatar'>\r\n                  <img src={defaultAvatar} alt='Avatar' />\r\n                </div>\r\n                <span\r\n                  style={{ marginLeft: '20px', cursor: 'pointer' }}\r\n                  onClick={this.logout}\r\n                >\r\n                  Logout\r\n                </span>\r\n              </>\r\n            )}\r\n          </div>\r\n        </header>\r\n        <div className='Content'>\r\n          <Nav />\r\n          <main className='MainContent'>\r\n            <Switch>\r\n              <Route path='/' exact>\r\n                <UsersList />\r\n              </Route>\r\n\r\n              <Route path='/profile/:userId'>\r\n                <Suspense\r\n                  fallback={\r\n                    <div>\r\n                      <Spinner />\r\n                    </div>\r\n                  }\r\n                >\r\n                  <Profile />\r\n                </Suspense>\r\n              </Route>\r\n              <Route path='/Login' exact>\r\n                <Login />\r\n              </Route>\r\n              <Route path='/social-network' exact>\r\n                <UsersList />\r\n              </Route>\r\n              <Route path='/messages' exact>\r\n                <Messages />\r\n              </Route>\r\n              <Route path='/news' exact>\r\n                <News />\r\n              </Route>\r\n              <Route path='/settings' exact>\r\n                <Settings />\r\n              </Route>\r\n            </Switch>\r\n          </main>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    isAuth: getIsAuth(state),\r\n    login: getUserLogin(state),\r\n    initialized: state.appReducer.initialized\r\n  };\r\n};\r\n\r\nexport default compose(\r\n  withRouter,\r\n  connect(mapStateToProps, {\r\n    logoutThunk,\r\n    initializeThunk\r\n  })\r\n)(App);\r\n","import { combineReducers } from 'redux';\r\n\r\nimport usersReducer from './reducers/usersReducer';\r\nimport authReducer from './reducers/authReducer';\r\nimport profileReducer from './reducers/profileReducer';\r\nimport appReducer from './reducers/appReducer';\r\n\r\nimport {reducer as formReducer} from 'redux-form';\r\n\r\nexport const rootReducer = combineReducers({\r\n  appReducer,\r\n  authReducer,\r\n  usersReducer,\r\n  profileReducer,\r\n  form: formReducer,\r\n});\r\n\r\ntype RootReducerType = typeof rootReducer;\r\n\r\nexport type AppStateType = ReturnType<RootReducerType>","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './App';\r\n\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport {rootReducer} from './redux/rootReducer';\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { BrowserRouter} from 'react-router-dom';\r\nimport thunkMiddleware from 'redux-thunk';\r\n\r\nconst store = createStore(rootReducer, applyMiddleware(thunkMiddleware));\r\n\r\nwindow.store = store;\r\n\r\nconst app = (\r\n  <Provider store={store}>\r\n    {/* <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter> */}\r\n\r\n    <HashRouter>\r\n      <App />\r\n    </HashRouter>\r\n  </Provider>\r\n);\r\n\r\nReactDOM.render(app, document.getElementById('root'));\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Login\":\"Login_Login__1t_6N\",\"Form\":\"Login_Form__2-G2S\",\"FormItem\":\"Login_FormItem__1EkK2\",\"FormItemCheckbox\":\"Login_FormItemCheckbox__30jr_\",\"FormItemButton\":\"Login_FormItemButton__3iJ53\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Pagination\":\"Pagination_Pagination__2rvuc\",\"PaginationControl\":\"Pagination_PaginationControl__2F2eL\",\"PaginationItems\":\"Pagination_PaginationItems__3Rh8D\",\"active\":\"Pagination_active__28ytu\"};","import React from 'react';\r\nimport classes from './Spinner.module.scss';\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className={classes.SpinnerWrap}>\r\n      <div className={classes.skChase}>\r\n        <div className={classes.skChaseDot}></div>\r\n        <div className={classes.skChaseDot}></div>\r\n        <div className={classes.skChaseDot}></div>\r\n        <div className={classes.skChaseDot}></div>\r\n        <div className={classes.skChaseDot}></div>\r\n        <div className={classes.skChaseDot}></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"UserListItem\":\"UserListItem_UserListItem__Sz2rs\",\"UserListItemImg\":\"UserListItem_UserListItemImg__1emSv\",\"UserListItemName\":\"UserListItem_UserListItemName__3yikv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FormCheckbox\":\"FormControl_FormCheckbox__28GhW\"};"],"sourceRoot":""}