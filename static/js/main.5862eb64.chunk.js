(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{122:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return m}));var a=n(8),r=n(16),o={isLoading:!1,profileInfo:null,status:""};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PROFILE":return Object(a.a)({},e,{profileInfo:Object(a.a)({},t.profile)});case"TOGGLE_IS_LOADING":return Object(a.a)({},e,{isLoading:t.loading});case"SET_STATUS":return Object(a.a)({},e,{status:t.status});default:return e}}var s=function(e){return{type:"TOGGLE_IS_LOADING",loading:e}},c=function(e){return{type:"SET_STATUS",status:e}},u=function(e){return function(t){t(s(!1)),r.b.getProfile(e).then((function(e){t({type:"SET_PROFILE",profile:e}),t(s(!0))}))}},l=function(e){return function(t){r.b.getStatus(e).then((function(e){t(c(e))}))}},m=function(e){return function(t){r.b.updateStatus(e).then((function(n){n.resultCode||t(c(e))}))}}},127:function(e,t,n){e.exports={Users:"UsersList_Users__2YTJ6"}},131:function(e,t,n){e.exports={Messages:"Messages_Messages__33Ht9"}},132:function(e,t,n){e.exports={News:"News_News__30ej5"}},133:function(e,t,n){e.exports={Settings:"Settings_Settings__2NZt4"}},16:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var a=n(130),r=n.n(a).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"1d50145e-9b5b-43e8-933a-f2213da6e70b"}}),o={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return r.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return r.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return r.delete("follow/".concat(e)).then((function(e){return e.data}))}},i={getProfile:function(e){return r.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return r.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return r.put("profile/status",{status:e}).then((function(e){return e.data}))}},s={me:function(){return r.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},logout:function(){return r.delete("auth/login").then((function(e){return e.data}))}}},161:function(e,t,n){e.exports=n(287)},166:function(e,t,n){},167:function(e,t,n){},22:function(e,t,n){e.exports={SpinnerWrap:"Spinner_SpinnerWrap__ZsQgZ",skChase:"Spinner_skChase__U0TiR","sk-chase":"Spinner_sk-chase__3HvUI",skChaseDot:"Spinner_skChaseDot__1zdue","sk-chase-dot":"Spinner_sk-chase-dot__3b1L5","sk-chase-dot-before":"Spinner_sk-chase-dot-before__3exAG"}},23:function(e,t,n){e.exports={Nav:"Nav_Nav__bCTYE",NavList:"Nav_NavList__KuCu7",active:"Nav_active__11_gR"}},287:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(60),i=n.n(o),s=(n(166),n(26)),c=n(27),u=n(29),l=n(28),m=n(30),f=(n(167),n(127)),p=n.n(f),d=n(9),h=n(10),g=n(7),E=n(66),b=n.n(E),v=function(e){var t=e.userId,n=e.photo,a=e.name,o=e.followed,i=e.follow,s=e.unfollow,c=e.followingInProgress,u=e.onClickUserItem;return r.a.createElement("div",{onClick:function(){return u(t)},className:b.a.UserListItem},r.a.createElement("div",{className:b.a.UserListItemImg},r.a.createElement("img",{src:n||"https://specenergo.ru/sites/default/files/styles/mt_testimonial_image/public/2016-11/testimonial-4.jpg?itok=a7UblV6p",alt:"img"})),r.a.createElement("div",{className:b.a.UserListItemName},a),o?r.a.createElement("button",{disabled:c.some((function(e){return e===t})),onClick:function(e){e.stopPropagation(),s(t)}},"Unfollow"):r.a.createElement("button",{disabled:c.some((function(e){return e===t})),onClick:function(e){e.stopPropagation(),i(t)}},"Follow"))},_=n(47),O=n(125),S=n(43),I=n.n(S),N=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],o=1;o<=t;o++)n.push(o);var i=Math.ceil(t/e.portionSize),s=Object(a.useState)(1),c=Object(O.a)(s,2),u=c[0],l=c[1],m=(u-1)*e.portionSize+1,f=u*e.portionSize;return r.a.createElement("div",{className:I.a.Pagination},u>1&&r.a.createElement("button",{className:I.a.PaginationControl,onClick:function(){l(u-1)}},"Prev"),r.a.createElement("div",{className:I.a.PaginationItems},n.filter((function(e){return e>=m&&e<=f})).map((function(t){return r.a.createElement("span",{className:e.currentPage===t?I.a.active:"",key:t,onClick:function(){return e.onPageChanged(t,e.pageSize)}},t)}))),i>u&&r.a.createElement("button",{className:I.a.PaginationControl,onClick:function(){l(u+1)}},"Next"))},C=function(e){return{isAuth:e.authReducer.isAuth}},L=n(90),k=n(8),w=n(16),j={users:[],pageSize:10,portionSize:10,totalUsersCount:0,currentPage:1,isLoaded:!1,followingInProgress:[]};var T=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},U=function(e){return{type:"TOGGLE_IS_LOADED",isLoaded:e}},P=function(e){return{type:"SET_USERS",users:e}},y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).hundlerClickUserItem=function(e){n.props.history.push("/profile/".concat(e))},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreator()}},{key:"render",value:function(){var e=this,t=r.a.createElement(_.a,null),n=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:p.a.Users},this.props.users.map((function(t){return r.a.createElement(v,{name:t.name,userId:t.id,photo:t.photos.large,key:t.id,followed:t.followed,follow:e.props.follow,unfollow:e.props.unfollow,onClickUserItem:e.hundlerClickUserItem,followingInProgress:e.props.followingInProgress})}))),r.a.createElement(N,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,portionSize:this.props.portionSize,currentPage:this.props.currentPage,onPageChanged:this.props.onPageChanged}));return this.props.isLoaded?n:t}}]),t}(a.Component),A=Object(g.d)(Object(d.b)((function(e){return{users:e.usersReducer.users,pageSize:e.usersReducer.pageSize,portionSize:e.usersReducer.portionSize,totalUsersCount:e.usersReducer.totalUsersCount,currentPage:e.usersReducer.currentPage,isLoaded:e.usersReducer.isLoaded,followingInProgress:e.usersReducer.followingInProgress}}),{getUsersThunkCreator:function(){return function(e){e(U(!1)),w.c.getUsers().then((function(t){e(P(t.items)),e({type:"SET_USERS_TOTAL_COUNT",usersTotalCount:t.totalCount}),e(U(!0))}))}},onPageChanged:function(e,t){return function(n){n(function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}}(e)),w.c.getUsers(e,t).then((function(e){n(P(e.items))}))}},follow:function(e){return function(t){t(T(!0,e)),w.c.follow(e).then((function(n){0===n.resultCode&&t(function(e){return{type:"FOLLOW",userId:e}}(e)),t(T(!1,e))}))}},unfollow:function(e){return function(t){t(T(!0,e)),w.c.unfollow(e).then((function(n){0===n.resultCode&&t(function(e){return{type:"UNFOLLOW",userId:e}}(e)),t(T(!1,e))}))}}}),h.g,(function(e){var t=function(t){function n(){return Object(s.a)(this,n),Object(u.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(m.a)(n,t),Object(c.a)(n,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(e,this.props):r.a.createElement(h.a,{to:"/login"})}}]),n}(r.a.Component);return Object(d.b)(C)(t)}))(y),x=n(131),R=n.n(x),F=function(){return r.a.createElement("div",{className:R.a.Messages},"There will be messages")},z=n(132),G=n.n(z),D=function(){return r.a.createElement("div",{className:G.a.News},"There will be news")},M=n(133),W=n.n(M),H=function(){return r.a.createElement("div",{className:W.a.Settings},"There will be Settings")},Z=n(36),B=n.n(Z),J=n(123),K=n(124),Y=n(37),q=n.n(Y),V=n(67),Q=n(61),X={id:null,email:null,login:null,isAuth:!1};var $=function(e,t,n,a){return{type:"auth/SET_AUTH_USER_DATA",data:{userId:e,email:t,login:n,isAuth:a}}},ee=function(){return function(){var e=Object(V.a)(q.a.mark((function e(t){var n,a,r,o,i;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.me();case 2:0===(n=e.sent).resultCode&&(a=n.data,r=a.id,o=a.email,i=a.login,t($(r,o,i,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},te=function(){return function(){var e=Object(V.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.logout();case 2:0===e.sent.resultCode&&t($(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ne=n(91),ae=n(87),re=n.n(ae),oe=function(e){var t=e.input,n=e.meta,a=Object(ne.a)(e,["input","meta"]);return r.a.createElement("div",{className:re.a.FormInput},r.a.createElement("input",Object.assign({},t,a)),n.touched&&n.error&&r.a.createElement("div",{style:{color:"red",marginTop:"10px"}},n.error))},ie=function(e){var t=e.input,n=(e.meta,Object(ne.a)(e,["input","meta"]));return r.a.createElement("div",{className:re.a.FormCheckbox},r.a.createElement("label",{htmlFor:""},r.a.createElement("input",Object.assign({},t,n))))},se=function(e){if(!e)return"Field is required";console.log("validate(required) ok")},ce=Object(K.a)({form:"login"})((function(e){return r.a.createElement("form",{className:B.a.Form,onSubmit:e.handleSubmit},r.a.createElement("div",{style:{fontSize:"20px",color:"#fff"}},r.a.createElement("div",{style:{fontWeight:"bold"}},"Test Account:"),r.a.createElement("div",null,"Email: free@samuraijs.com"),r.a.createElement("div",null,"Password: free")),r.a.createElement("div",{className:B.a.FormItem},r.a.createElement("label",{htmlFor:""},"Login"),r.a.createElement(J.a,{validate:[se],name:"email",component:oe,placeholder:"Email"})),r.a.createElement("div",{className:B.a.FormItem},r.a.createElement("label",{htmlFor:""},"Password"),r.a.createElement(J.a,{name:"password",component:oe,placeholder:"Password"})),r.a.createElement("div",{className:B.a.FormItemCheckbox},r.a.createElement(J.a,{name:"rememberMe",id:"checkbox",type:"checkbox",component:ie}),r.a.createElement("label",{htmlFor:"checkbox"},"Remember")),e.error&&r.a.createElement("div",{style:{color:"red"}},e.error),r.a.createElement("div",{className:B.a.FormItemButton},r.a.createElement("button",null,"Login")))})),ue=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){n.props.loginThunk(e.email,e.password,e.rememberMe)},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(h.a,{to:"/"}):r.a.createElement("div",{className:B.a.Login},r.a.createElement(ce,{onSubmit:this.onSubmit}))}}]),t}(a.Component),le=Object(d.b)((function(e){return{isAuth:e.authReducer.isAuth}}),{loginThunk:function(e,t,n){return function(){var a=Object(V.a)(q.a.mark((function a(r){var o,i,s;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.login(e,t,n);case 2:0===(o=a.sent).resultCode?r(ee()):(i=o.messages.length>0?o.messages[0]:"Some Error",s=Object(Q.a)("login",{_error:i}),r(s));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},logoutThunk:te})(ue),me=n(23),fe=n.n(me),pe=n(17),de=Object(d.b)((function(e){return{userId:e.authReducer.userId,isAuth:e.authReducer.isAuth}}))((function(e){return r.a.createElement("nav",{className:fe.a.Nav},r.a.createElement("ul",{className:fe.a.NavList},r.a.createElement("li",null,e.isAuth?r.a.createElement(pe.b,{to:"/profile/".concat(e.userId),activeClassName:fe.a.active,exact:!0},"My profile"):r.a.createElement(pe.b,{to:"/login",activeClassName:fe.a.active,exact:!0},"My profile")),r.a.createElement("li",null,r.a.createElement(pe.b,{to:"/",activeClassName:fe.a.active,exact:!0},"Users")),r.a.createElement("li",null,r.a.createElement(pe.b,{to:"/messages",activeClassName:fe.a.active},"Messages")),r.a.createElement("li",null,r.a.createElement(pe.b,{to:"/news",activeClassName:fe.a.active,exact:!0},"News")),r.a.createElement("li",null,r.a.createElement(pe.b,{to:"/settings",activeClassName:fe.a.active},"Settings"))))})),he={initialized:!1};var ge=function(e){return e.authReducer.isAuth},Ee=function(e){return e.authReducer.login},be=r.a.lazy((function(){return n.e(3).then(n.bind(null,290))})),ve=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){n.props.logoutThunk(),n.props.history.push("/login")},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeThunk()}},{key:"render",value:function(){var e=r.a.createElement("div",{className:"AppInitialize"},r.a.createElement(_.a,null),r.a.createElement("span",{className:"AppInitializeText"},"Loading..."));return this.props.initialized?r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"Header"},r.a.createElement("div",{className:"Logo"},"SocialNetwork"),r.a.createElement("div",{className:"User"},!this.props.isAuth&&r.a.createElement("div",{style:{marginLeft:"20px",cursor:"pointer"}},r.a.createElement(pe.b,{to:"/login"},"Login")),this.props.isAuth&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"UserName"},this.props.login),r.a.createElement("div",{className:"Avatar"},r.a.createElement("img",{src:"https://specenergo.ru/sites/default/files/styles/mt_testimonial_image/public/2016-11/testimonial-4.jpg?itok=a7UblV6p",alt:"Avatar"})),r.a.createElement("span",{style:{marginLeft:"20px",cursor:"pointer"},onClick:this.logout},"Logout")))),r.a.createElement("div",{className:"Content"},r.a.createElement(de,null),r.a.createElement("main",{className:"MainContent"},r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/",exact:!0},r.a.createElement(A,null)),r.a.createElement(h.b,{path:"/profile/:userId"},r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,r.a.createElement(_.a,null))},r.a.createElement(be,null))),r.a.createElement(h.b,{path:"/Login",exact:!0},r.a.createElement(le,null)),r.a.createElement(h.b,{path:"/social-network",exact:!0},r.a.createElement(A,null)),r.a.createElement(h.b,{path:"/messages",exact:!0},r.a.createElement(F,null)),r.a.createElement(h.b,{path:"/news",exact:!0},r.a.createElement(D,null)),r.a.createElement(h.b,{path:"/settings",exact:!0},r.a.createElement(H,null)))))):e}}]),t}(a.Component),_e=Object(g.d)(h.g,Object(d.b)((function(e){return{isAuth:ge(e),login:Ee(e),initialized:e.appReducer.initialized}}),{logoutThunk:te,initializeThunk:function(){return function(e){var t=e(ee());Promise.all([t]).then((function(){e({type:"SET_INITIALIZED"})}))}}}))(ve),Oe=n(122),Se=n(126),Ie=Object(g.c)({appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INITIALIZED":return Object(k.a)({},e,{initialized:!0});default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_AUTH_USER_DATA":return Object(k.a)({},e,{},t.data,{isAuth:t.data.isAuth});default:return e}},usersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(k.a)({},e,{users:Object(L.a)(t.users)});case"SET_USERS_TOTAL_COUNT":return Object(k.a)({},e,{totalUsersCount:t.usersTotalCount});case"SET_CURRENT_PAGE":return Object(k.a)({},e,{currentPage:t.currentPage});case"FOLLOW":return Object(k.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(k.a)({},e,{followed:!0}):e}))});case"UNFOLLOW":return Object(k.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(k.a)({},e,{followed:!1}):e}))});case"TOGGLE_IS_LOADED":return Object(k.a)({},e,{isLoaded:t.isLoaded});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(k.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(L.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},profileReducer:Oe.a,form:Se.a}),Ne=n(135),Ce=Object(g.e)(Ie,Object(g.a)(Ne.a));window.store=Ce;var Le=r.a.createElement(d.a,{store:Ce},r.a.createElement(pe.a,null,r.a.createElement(_e,null)));i.a.render(Le,document.getElementById("root"))},36:function(e,t,n){e.exports={Login:"Login_Login__1t_6N",Form:"Login_Form__2-G2S",FormItem:"Login_FormItem__1EkK2",FormItemCheckbox:"Login_FormItemCheckbox__30jr_",FormItemButton:"Login_FormItemButton__3iJ53"}},43:function(e,t,n){e.exports={Pagination:"Pagination_Pagination__2rvuc",PaginationControl:"Pagination_PaginationControl__2F2eL",PaginationItems:"Pagination_PaginationItems__3Rh8D",active:"Pagination_active__28ytu"}},47:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(22),i=n.n(o);t.a=function(){return r.a.createElement("div",{className:i.a.SpinnerWrap},r.a.createElement("div",{className:i.a.skChase},r.a.createElement("div",{className:i.a.skChaseDot}),r.a.createElement("div",{className:i.a.skChaseDot}),r.a.createElement("div",{className:i.a.skChaseDot}),r.a.createElement("div",{className:i.a.skChaseDot}),r.a.createElement("div",{className:i.a.skChaseDot}),r.a.createElement("div",{className:i.a.skChaseDot})))}},66:function(e,t,n){e.exports={UserListItem:"UserListItem_UserListItem__Sz2rs",UserListItemImg:"UserListItem_UserListItemImg__1emSv",UserListItemName:"UserListItem_UserListItemName__3yikv"}},87:function(e,t,n){e.exports={FormCheckbox:"FormControl_FormCheckbox__28GhW"}}},[[161,1,2]]]);
//# sourceMappingURL=main.5862eb64.chunk.js.map